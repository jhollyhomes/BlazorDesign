@page "/settings"
@using System.Text;
@using System.Reflection;

<PageTitle>Settings</PageTitle>

<PageSectionTitle Title="Settings" />

<div class="flex flex-row gap-3">

    <div class="basis-1/2 flex flex-col gap-y-3">

        <div class="px-8 py-6 @(ThemeState.ContentSectionBackColour) @(ThemeState.ContentSectionRounded ? "rounded-lg" : "")  @(ThemeState.ContentSectionShadow? "shadow-lg" : "") ">
            <h2 class="text-base font-semibold leading-7 @(ThemeState.ContentSectionTitleColour)">Top bar</h2>
            <p class="mt-1 text-sm leading-6 @(ThemeState.ContentSectionParagraphColour)">Topbar theme colours</p>
            <fieldset>

                <hr class="my-3" />

                <ColourSetting Label="Top Bar Back Colour" ColourState="ThemeState.SetTopBarBackColour"
                               ColourPart="@(ThemeState.TopBarBackColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Top Bar Icon Colour" ColourState="ThemeState.SetTopBarIconColour"
                               ColourPart="@(ThemeState.TopBarIconColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Top Bar Icon Hover Colour" ColourState="ThemeState.SetTopBarIconHoverColour"
                               ColourPart="@(ThemeState.TopBarIconHoverColour?.RemoveTailwindPrefix())" CssType="CssTypes.HoverText" />

                <ColourSetting Label="Top Bar Text Colour" ColourState="ThemeState.SetTopBarTextColour"
                               ColourPart="@(ThemeState.TopBarTextColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Top Bar Text Hover Colour" ColourState="ThemeState.SetTopBarTextHoverColour"
                               ColourPart="@(ThemeState.TopBarTextHoverColour?.RemoveTailwindPrefix())" CssType="CssTypes.HoverText" />

                <ColourSetting Label="Top Bar Divider Colour" ColourState="ThemeState.SetTopBarDividerColour"
                               ColourPart="@(ThemeState.TopBarDividerColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <BooleanSetting Label="Top Bar Shadow" InitialValue="@(ThemeState.TopBarShadow)" BooleanState="@(ThemeState.SetTopBarShadow)">
                </BooleanSetting>

            </fieldset>
        </div>

        <div class="px-8 py-6 @(ThemeState.ContentSectionBackColour) @(ThemeState.ContentSectionRounded ? "rounded-lg" : "")  @(ThemeState.ContentSectionShadow? "shadow-lg" : "") ">
            <h2 class="text-base font-semibold leading-7 @(ThemeState.ContentSectionTitleColour)">Content</h2>
            <p class="mt-1 text-sm leading-6 @(ThemeState.ContentSectionParagraphColour)">Content theme design colours</p>
            <fieldset>

                <hr class="my-3" />

                <ColourSetting Label="Content Background Colour" ColourState="ThemeState.SetContentBackgroundColour"
                               ColourPart="@(ThemeState.ContentBackgroundColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Content Title Text Colour" ColourState="ThemeState.SetContentTitleTextColour"
                               ColourPart="@(ThemeState.ContentTitleTextColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Content Section Back Colour" ColourState="ThemeState.SetContentSectionBackColour"
                               ColourPart="@(ThemeState.ContentSectionBackColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <BooleanSetting Label="Content Section Rounded" InitialValue="@(ThemeState.ContentSectionRounded)" BooleanState="@(ThemeState.SetContentSectionRounded)">
                </BooleanSetting>

                <BooleanSetting Label="Content Section Shadow" InitialValue="@(ThemeState.ContentSectionShadow)" BooleanState="@(ThemeState.SetContentSectionShadow)">
                </BooleanSetting>
                
                <ColourSetting Label="Content Section Title Colour" ColourState="ThemeState.SetContentSectionTitleColour"
                               ColourPart="@(ThemeState.ContentSectionTitleColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Content Section Paragraph Colour" ColourState="ThemeState.SetContentSectionParagraphColour"
                               ColourPart="@(ThemeState.ContentSectionParagraphColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Content Section Label Colour" ColourState="ThemeState.SetContentSectionLabelColour"
                               ColourPart="@(ThemeState.ContentSectionLabelColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

            </fieldset>
        </div>

    </div>

    <div class="basis-1/2 flex flex-col gap-y-3">

        <div class="px-8 py-6 @(ThemeState.ContentSectionBackColour) @(ThemeState.ContentSectionRounded ? "rounded-lg" : "")  @(ThemeState.ContentSectionShadow? "shadow-lg" : "") ">
            <h2 class="text-base font-semibold leading-7 @(ThemeState.ContentSectionTitleColour)">Sidebar</h2>
            <p class="mt-1 text-sm leading-6 @(ThemeState.ContentSectionParagraphColour)">Desktop and mobile side bar theme colours</p>
            <fieldset>

                <hr class="my-3" />

                <ColourSetting Label="Side Bar Title ManageMi Colour" ColourState="ThemeState.SetSideBarTitleManageMiColour"
                               ColourPart="@(ThemeState.SideBarTitleManageMiColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Side Bar Title Other Colour" ColourState="ThemeState.SetSideBarTitleOtherColour"
                               ColourPart="@(ThemeState.SideBarTitleOtherColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Side Bar Background Colour" ColourState="ThemeState.SetSideBarBackgroundColour"
                               ColourPart="@(ThemeState.SideBarBackgroundColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Side Bar Selected Background Colour" ColourState="ThemeState.SetSideBarSelectedBackgroundColour"
                               ColourPart="@(ThemeState.SideBarSelectedBackgroundColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Side Bar Text Title Colour" ColourState="ThemeState.SetSideBarTextTitleColour"
                               ColourPart="@(ThemeState.SideBarTextTitleColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Side Bar Button Back Colour" ColourState="ThemeState.SetSideBarButtonColour"
                               ColourPart="@(ThemeState.SideBarButtonColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Side Bar Button Hover Colour" ColourState="ThemeState.SetSideBarButtonHoverColour"
                               ColourPart="@(ThemeState.SideBarButtonHoverColour?.RemoveTailwindPrefix())" CssType="CssTypes.HoverBackground" />

                <ColourSetting Label="Side Bar Button Icon Colour" ColourState="ThemeState.SetSideBarButtonIconColour"
                               ColourPart="@(ThemeState.SideBarButtonIconColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

                <ColourSetting Label="Side Bar Button Text Colour" ColourState="ThemeState.SetSideBarButtonTextColour"
                               ColourPart="@(ThemeState.SideBarButtonTextColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

            </fieldset>
        </div>

        <div class="px-8 py-6 @(ThemeState.ContentSectionBackColour) @(ThemeState.ContentSectionRounded ? "rounded-lg" : "")  @(ThemeState.ContentSectionShadow? "shadow-lg" : "") ">
            <h2 class="text-base font-semibold leading-7 @(ThemeState.ContentSectionTitleColour)">Burger</h2>
            <p class="mt-1 text-sm leading-6 @(ThemeState.ContentSectionParagraphColour)">The menu expand collapse button theme colours</p>
            <fieldset>

                <hr class="my-3" />

                <ColourSetting Label="Burger Back Colour" ColourState="ThemeState.SetBurgerBackColour"
                               ColourPart="@(ThemeState.BurgerBackColour?.RemoveTailwindPrefix())" CssType="CssTypes.Background" />

                <ColourSetting Label="Burger Hover Back Colour" ColourState="ThemeState.SetBurgerHoverBackColour"
                               ColourPart="@(ThemeState.BurgerHoverBackColour?.RemoveTailwindPrefix())" CssType="CssTypes.HoverBackground" />

                <ColourSetting Label="Burger Icon Colour" ColourState="ThemeState.SetBurgerIconColour"
                               ColourPart="@(ThemeState.BurgerIconColour?.RemoveTailwindPrefix())" CssType="CssTypes.Text" />

            </fieldset>
        </div>

    </div>

</div>

<div class="mt-8"></div>

<PageSectionTitle Title="Export" />

<div class="flex flex-row gap-3">

    <div class="basis w-full flex flex-col gap-y-3">

        <div class="px-8 py-6 @(ThemeState.ContentSectionBackColour) @(ThemeState.ContentSectionRounded ? "rounded-lg" : "")  @(ThemeState.ContentSectionShadow? "shadow-lg" : "") ">

            <p class="mt-1 text-sm leading-6 @(ThemeState.ContentSectionParagraphColour)">Export of theme values to be used to make themes</p>
            
            <hr class="my-3" />

            <div class="my-5 flex items-center justify-start gap-x-6">
                <button type="button" @onclick="RecreateThemeValues" class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                    Refresh
                </button>
            </div>

            <fieldset>

                @if (ThemeValues != null)
                {
                    @foreach (var themeValue in ThemeValues)
                    {
                        <div>@themeValue</div>
                    }
                }

            </fieldset>

        </div>

    </div>

</div>

@code {

    [CascadingParameter]
    protected ThemeState ThemeState { get; set; } = default!;

    private List<string> ThemeValues = new List<string>();

    private void RecreateThemeValues()
    {
        ThemeValues.Clear();

        var type = ThemeState.GetType();
        var properties = type.GetProperties();

        foreach (var item in properties)
        {
            var propertyName = item.Name;
            var value = item.GetValue(ThemeState);
            ThemeValues.Add($"{propertyName} = \"{value}\";");
        }
    }
}